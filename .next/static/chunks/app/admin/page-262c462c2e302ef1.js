(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3999:(e,t,a)=>{"use strict";function s(e){let t=Math.floor(e/60),a=e%60;return 0===t?"".concat(a,"m"):0===a?"".concat(t,"h"):"".concat(t,"h ").concat(a,"m")}function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{AM:()=>s,cn:()=>i})},4083:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155),i=a(1793),l=a(9511);function r(){let{theme:e,setTheme:t}=(0,l.D)(),a="dark"===e;return(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{t(a?"light":"dark")},className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:(0,s.jsx)(i.P.div,{initial:!1,animate:{rotate:180*!!a},transition:{duration:.3},className:"w-5 h-5 flex items-center justify-center",children:a?(0,s.jsx)("i",{className:"ri-moon-line text-yellow-500"}):(0,s.jsx)("i",{className:"ri-sun-line text-yellow-500"})})})}},4912:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155),i=a(1793),l=a(3999);function r(e){let{variant:t="primary",size:a="md",loading:r=!1,icon:n,children:o,className:d,disabled:c,...m}=e;return(0,s.jsxs)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:(0,l.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap",{primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl",secondary:"bg-gray-600 hover:bg-gray-700 text-white shadow-lg hover:shadow-xl",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white",ghost:"text-gray-600 hover:bg-gray-100 hover:text-gray-900",danger:"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a],(c||r)&&"opacity-50 cursor-not-allowed",d),disabled:c||r,...m,children:[r?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):n&&(0,s.jsx)("span",{className:"mr-2",children:n}),o]})}},5395:(e,t,a)=>{Promise.resolve().then(a.bind(a,9981))},6076:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),i=a(2115),l=a(3999);let r=(0,i.forwardRef)((e,t)=>{let{label:a,error:i,icon:r,className:n,...o}=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[a&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a}),(0,s.jsxs)("div",{className:"relative",children:[r&&(0,s.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:r}),(0,s.jsx)("input",{ref:t,className:(0,l.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",r?"pl-10":"",i&&"border-red-500 focus:ring-red-500",n),...o})]}),i&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:i})]})});r.displayName="Input";let n=r},6481:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155),i=a(1793),l=a(4083);function r(e){let{children:t,title:a}=e;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(i.P.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)(i.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-building-line text-white text-lg"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"SharkSpace"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Noida Coworking"})]})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsxs)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{window.location.href="/"},className:"flex items-center space-x-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors cursor-pointer",children:[(0,s.jsx)("i",{className:"ri-logout-box-r-line"}),(0,s.jsx)("span",{children:"Logout"})]})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a&&(0,s.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:a})}),(0,s.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:t})]})]})}},9511:(e,t,a)=>{"use strict";a.d(t,{D:()=>n,ThemeProvider:()=>r});var s=a(5155),i=a(2115);let l=(0,i.createContext)(void 0);function r(e){let{children:t}=e,[a,r]=(0,i.useState)("light");return(0,i.useEffect)(()=>{let e=localStorage.getItem("theme");e?(r(e),"dark"===e&&document.documentElement.classList.add("dark")):window.matchMedia("(prefers-color-scheme: dark)").matches&&(r("dark"),document.documentElement.classList.add("dark"))},[]),(0,s.jsx)(l.Provider,{value:{theme:a,setTheme:e=>{r(e),localStorage.setItem("theme",e),"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}},children:t})}function n(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},9981:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(5155),i=a(2115),l=a(6481),r=a(1793),n=a(4912),o=a(6076),d=a(4879);function c(e){let{isOpen:t,onClose:a,title:l,children:n,maxWidth:o="md"}=e;return(0,i.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,s.jsx)(d.N,{children:t&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[o]," bg-white rounded-xl shadow-2xl overflow-hidden"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:l}),(0,s.jsx)("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors cursor-pointer",children:(0,s.jsx)("i",{className:"ri-close-line text-gray-500 text-xl"})})]}),(0,s.jsx)("div",{className:"p-6",children:n})]})]})})}function m(e){let{rooms:t,onUpdate:a}=e,[l,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(null),[h,u]=(0,i.useState)({name:"",description:"",image:null}),p=async e=>{e.preventDefault();try{let e=new FormData;e.append("name",h.name),e.append("description",h.description),h.image&&e.append("image",h.image),(null==m?void 0:m.id)&&e.append("id",m.id);let t=await fetch("/api/admin/rooms",{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create/update room")}await a(),d(!1),u({name:"",description:"",image:null})}catch(e){console.error("Error submitting room:",e),alert(e instanceof Error?e.message:"Failed to create/update room")}},g=async e=>{if(confirm("Delete this room?")){try{let t=await fetch("/api/admin/rooms/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete room")}await a()}catch(e){console.error("Error deleting room:",e),alert(e instanceof Error?e.message:"Failed to delete room")}a()}},y=e=>{x(e||null),u({name:(null==e?void 0:e.name)||"",description:(null==e?void 0:e.description)||"",image:null}),d(!0)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Room Management"}),(0,s.jsx)(n.A,{onClick:()=>y(),icon:(0,s.jsx)("i",{className:"ri-add-line"}),children:"Add Room"})]}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,t)=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"h-48 overflow-hidden",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(n.A,{size:"sm",onClick:()=>y(e),icon:(0,s.jsx)("i",{className:"ri-edit-line"}),children:"Edit"}),(0,s.jsx)(n.A,{size:"sm",variant:"danger",onClick:()=>g(e.id),icon:(0,s.jsx)("i",{className:"ri-delete-bin-line"}),children:"Delete"})]})]})]},e.id))}),(0,s.jsx)(c,{isOpen:l,onClose:()=>d(!1),title:m?"Edit Room":"Add Room",children:(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsx)(o.A,{label:"Name",value:h.name,onChange:e=>u({...h,name:e.target.value}),required:!0}),(0,s.jsx)("textarea",{placeholder:"Description",value:h.description,onChange:e=>u({...h,description:e.target.value}),className:"w-full p-2 border rounded",rows:3,required:!0}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Room Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&u({...h,image:a})},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!(null==m?void 0:m.image)})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(n.A,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)(n.A,{type:"submit",children:m?"Update":"Create"})]})]})})]})}function x(e){let{users:t,onUpdate:a}=e,[l,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)({username:"",password:"",role:"client"}),h=async e=>{if(e.preventDefault(),t.some(e=>e.username===m.username))return void alert("Username already exists!");let s={username:m.username,password:m.password,role:m.role,createdAt:new Date};await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a(),d(!1)},u=async e=>{confirm("Delete this user?")&&(await fetch("/api/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resource:"users",action:"delete",data:{id:e}})}),a())};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,s.jsx)(n.A,{onClick:()=>d(!0),icon:(0,s.jsx)("i",{className:"ri-user-add-line"}),children:"Add User"})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,t)=>(0,s.jsxs)(r.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-user-line text-blue-600"})}),(0,s.jsx)("div",{className:"ml-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.username})})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"),children:e.role})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)(n.A,{variant:"danger",size:"sm",onClick:()=>u(e.id),icon:(0,s.jsx)("i",{className:"ri-delete-bin-line"}),children:"Delete"})})]},e.id))})]})})}),(0,s.jsx)(c,{isOpen:l,onClose:()=>d(!1),title:"Add New User",children:(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsx)(o.A,{label:"Username",value:m.username,onChange:e=>x({...m,username:e.target.value}),required:!0}),(0,s.jsx)(o.A,{label:"Password",type:"password",value:m.password,onChange:e=>x({...m,password:e.target.value}),required:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,s.jsxs)("select",{value:m.role,onChange:e=>x({...m,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"client",children:"Client"}),(0,s.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(n.A,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)(n.A,{type:"submit",children:"Create User"})]})]})})]})}var h=a(935),u=a(3999);function p(e){let{bookings:t,rooms:a,onUpdate:l}=e,[d,c]=(0,i.useState)(""),[m,x]=(0,i.useState)(""),[p,g]=(0,i.useState)(""),y=t.filter(e=>{let t=!d||(0,h.A)(new Date(e.startTime),"yyyy-MM-dd")===d,a=!m||e.roomId===m,s=!p||e.username.toLowerCase().includes(p.toLowerCase());return t&&a&&s}),j=async e=>{if(confirm("Are you sure you want to delete this booking?"))try{(await fetch("/api/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resource:"bookings",action:"delete",data:{id:e}})})).ok?l():alert("Failed to delete booking")}catch(e){console.error("Delete failed:",e),alert("Network error")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Management"}),(0,s.jsx)(n.A,{onClick:()=>{let e=new Blob([[["Room","User","Date","Start Time","End Time","Duration","Status","Created"],...y.map(e=>[e.roomName,e.username,(0,h.A)(new Date(e.startTime),"yyyy-MM-dd"),(0,h.A)(new Date(e.startTime),"HH:mm"),(0,h.A)(new Date(e.endTime),"HH:mm"),(0,u.AM)(e.duration),e.status,(0,h.A)(new Date(e.createdAt),"yyyy-MM-dd HH:mm")])].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="sharkspace-bookings-".concat((0,h.A)(new Date,"yyyy-MM-dd"),".csv"),a.click(),window.URL.revokeObjectURL(t)},icon:(0,s.jsx)("i",{className:"ri-download-line"}),children:"Export CSV"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsx)(o.A,{label:"Filter by Date",type:"date",value:d,onChange:e=>c(e.target.value),placeholder:"Select date"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Room"}),(0,s.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pr-8",children:[(0,s.jsx)("option",{value:"",children:"All Rooms"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)(o.A,{label:"Filter by User",value:p,onChange:e=>g(e.target.value),placeholder:"Search by username"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["Showing ",y.length," of ",t.length," bookings"]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((e,t)=>(0,s.jsxs)(r.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.roomName})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.username})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(0,h.A)(new Date(e.startTime),"MMM dd, yyyy")}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,h.A)(new Date(e.startTime),"HH:mm")," - ",(0,h.A)(new Date(e.endTime),"HH:mm")]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(0,u.AM)(e.duration)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)(n.A,{variant:"danger",size:"sm",onClick:()=>j(e.id),icon:(0,s.jsx)("i",{className:"ri-delete-bin-line"}),children:"Delete"})})]},e.id))})]})})}),0===y.length&&(0,s.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-gray-50 rounded-xl",children:[(0,s.jsx)("i",{className:"ri-calendar-line text-4xl text-gray-400 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No bookings found"})]})]})}var g=a(9737);function y(e){let{blockedSlots:t,rooms:a,onUpdate:l}=e,[d,m]=(0,i.useState)(!1),[x,u]=(0,i.useState)({roomId:"",date:"",startTime:"",endTime:"",reason:""}),p=async e=>{e.preventDefault();let t=a.find(e=>e.id===x.roomId);if(!t)return;let s=new Date("".concat(x.date,"T").concat(x.startTime)),i=new Date("".concat(x.date,"T").concat(x.endTime)),r={id:(0,g.A)(),roomId:x.roomId,roomName:t.name,startTime:s,endTime:i,reason:x.reason,createdAt:new Date};try{(await fetch("/api/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resource:"blockedSlots",action:"create",data:r})})).ok?(l(),m(!1)):alert("Failed to block time slot")}catch(e){console.error("Block slot failed:",e),alert("Network error")}},y=async e=>{if(confirm("Are you sure you want to remove this blocked slot?"))try{(await fetch("/api/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resource:"blockedSlots",action:"delete",data:{id:e}})})).ok?l():alert("Failed to delete blocked slot")}catch(e){console.error("Delete failed:",e),alert("Network error")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Blocked Slot Management"}),(0,s.jsx)(n.A,{onClick:()=>{u({roomId:"",date:"",startTime:"",endTime:"",reason:""}),m(!0)},icon:(0,s.jsx)("i",{className:"ri-forbid-line"}),children:"Block Time Slot"})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,t)=>(0,s.jsxs)(r.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.roomName})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(0,h.A)(new Date(e.startTime),"MMM dd, yyyy")}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,h.A)(new Date(e.startTime),"HH:mm")," - ",(0,h.A)(new Date(e.endTime),"HH:mm")]})]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.reason})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,h.A)(new Date(e.createdAt),"MMM dd, yyyy")}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)(n.A,{variant:"danger",size:"sm",onClick:()=>y(e.id),icon:(0,s.jsx)("i",{className:"ri-delete-bin-line"}),children:"Remove"})})]},e.id))})]})})}),0===t.length&&(0,s.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-gray-50 rounded-xl",children:[(0,s.jsx)("i",{className:"ri-forbid-line text-4xl text-gray-400 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No blocked slots"})]}),(0,s.jsx)(c,{isOpen:d,onClose:()=>m(!1),title:"Block Time Slot",children:(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room"}),(0,s.jsxs)("select",{value:x.roomId,onChange:e=>u({...x,roomId:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pr-8",children:[(0,s.jsx)("option",{value:"",children:"Select a room"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)(o.A,{label:"Date",type:"date",value:x.date,onChange:e=>u({...x,date:e.target.value}),required:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(o.A,{label:"Start Time",type:"time",value:x.startTime,onChange:e=>u({...x,startTime:e.target.value}),required:!0}),(0,s.jsx)(o.A,{label:"End Time",type:"time",value:x.endTime,onChange:e=>u({...x,endTime:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),(0,s.jsx)("textarea",{value:x.reason,onChange:e=>u({...x,reason:e.target.value}),required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reason for blocking this time slot"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(n.A,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,s.jsx)(n.A,{type:"submit",children:"Block Slot"})]})]})})]})}var j=a(182),f=a(3549),b=a(4195);function N(e){let{rooms:t,users:a,bookings:i,blockedSlots:l}=e,n=i.filter(e=>(0,j.A)(new Date(e.startTime))),o=i.filter(e=>(0,f.A)(new Date(e.startTime))),d=i.filter(e=>(0,b.A)(new Date(e.startTime))),c=a.filter(e=>"client"===e.role),m=i.reduce((e,t)=>e+t.duration,0),x=i.length>0?Math.round(m/i.length):0,h=[{title:"Total Rooms",value:t.length,icon:"ri-building-line",color:"from-blue-500 to-blue-600",textColor:"text-blue-600"},{title:"Active Users",value:c.length,icon:"ri-user-line",color:"from-green-500 to-green-600",textColor:"text-green-600"},{title:"Today's Bookings",value:n.length,icon:"ri-calendar-check-line",color:"from-purple-500 to-purple-600",textColor:"text-purple-600"},{title:"Blocked Slots",value:l.length,icon:"ri-forbid-line",color:"from-red-500 to-red-600",textColor:"text-red-600"}],u=i.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5),p=t.map(e=>({...e,bookingCount:i.filter(t=>t.roomId===e.id).length})).sort((e,t)=>t.bookingCount-e.bookingCount);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((e,t)=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-r ".concat(e.color," flex items-center justify-center"),children:(0,s.jsx)("i",{className:"".concat(e.icon," text-white text-xl")})}),(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(e.textColor),children:e.value})]}),(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:e.title})]},e.title))}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:[(0,s.jsx)("i",{className:"ri-calendar-check-line mr-2 text-blue-600"}),"Recent Bookings"]}),(0,s.jsx)("div",{className:"space-y-3",children:u.length>0?u.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.roomName}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.username})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.duration,"m"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]},e.id)):(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent bookings"})})]}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:[(0,s.jsx)("i",{className:"ri-building-line mr-2 text-green-600"}),"Room Usage"]}),(0,s.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.bookingCount," bookings"]})]}),(0,s.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(e.bookingCount/Math.max(...p.map(e=>e.bookingCount),1)*100,100),"%")}})})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,s.jsx)("i",{className:"ri-calendar-line text-3xl text-blue-600 mb-3"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"This Week"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:o.length}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Bookings"})]}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,s.jsx)("i",{className:"ri-calendar-2-line text-3xl text-purple-600 mb-3"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"This Month"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:d.length}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Bookings"})]}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,s.jsx)("i",{className:"ri-time-line text-3xl text-orange-600 mb-3"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Avg Duration"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[x,"m"]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Per Booking"})]})]})]})}function w(){let[e,t]=(0,i.useState)("overview"),[a,r]=(0,i.useState)([]),[n,o]=(0,i.useState)([]),[d,c]=(0,i.useState)([]),[h,u]=(0,i.useState)([]),[g,j]=(0,i.useState)(!0),f=async()=>{try{j(!0);let e={headers:{"Content-Type":"application/json","x-user":"admin"}},[t,a,s,i]=await Promise.all([fetch("/api/admin/rooms",e),fetch("/api/admin/users",e),fetch("/api/admin/bookings",e),fetch("/api/admin/blocked-slots",e)]);if(!t.ok||!a.ok||!s.ok||!i.ok)throw Error("Failed to refresh admin data");let[l,n,d,m]=await Promise.all([t.json(),a.json(),s.json(),i.json()]);r(l),o(n),c(d),u(m)}catch(e){console.error("Failed to refresh admin data:",e),r([]),o([]),c([]),u([]),alert("Failed to refresh data. Please try again.")}finally{j(!1)}};return((0,i.useEffect)(()=>{f()},[]),g)?(0,s.jsx)(l.A,{title:"Admin Dashboard",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Loading admin data..."})})}):(0,s.jsx)(l.A,{title:"Admin Dashboard",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-6 text-white",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Admin Control Panel"}),(0,s.jsx)("p",{className:"text-purple-100",children:"Manage rooms, users, and bookings for SharkSpace Noida"})]}),(0,s.jsx)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:[{key:"overview",label:"Overview",icon:"ri-dashboard-line"},{key:"rooms",label:"Rooms",icon:"ri-building-line"},{key:"users",label:"Users",icon:"ri-user-line"},{key:"bookings",label:"Bookings",icon:"ri-calendar-check-line"},{key:"blocked",label:"Blocked Slots",icon:"ri-forbid-line"}].map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.key),className:"px-4 py-2 rounded-md font-medium transition-all cursor-pointer whitespace-nowrap ".concat(e===a.key?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,s.jsx)("i",{className:"".concat(a.icon," mr-2")}),a.label]},a.key))}),(0,s.jsxs)("div",{children:["overview"===e&&(0,s.jsx)(N,{rooms:a,users:n,bookings:d,blockedSlots:h}),"rooms"===e&&(0,s.jsx)(m,{rooms:a,onUpdate:f}),"users"===e&&(0,s.jsx)(x,{users:n,onUpdate:f}),"bookings"===e&&(0,s.jsx)(p,{bookings:d,rooms:a,onUpdate:f}),"blocked"===e&&(0,s.jsx)(y,{blockedSlots:h,rooms:a,onUpdate:f})]})]})})}}},e=>{e.O(0,[793,421,292,441,964,358],()=>e(e.s=5395)),_N_E=e.O()}]);
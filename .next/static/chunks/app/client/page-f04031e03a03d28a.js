(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{3603:(e,t,s)=>{Promise.resolve().then(s.bind(s,7644))},3999:(e,t,s)=>{"use strict";function a(e){let t=Math.floor(e/60),s=e%60;return 0===t?"".concat(s,"m"):0===s?"".concat(t,"h"):"".concat(t,"h ").concat(s,"m")}function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}s.d(t,{AM:()=>a,cn:()=>r})},4083:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(1793),i=s(9511);function l(){let{theme:e,setTheme:t}=(0,i.D)(),s="dark"===e;return(0,a.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{t(s?"light":"dark")},className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:(0,a.jsx)(r.P.div,{initial:!1,animate:{rotate:180*!!s},transition:{duration:.3},className:"w-5 h-5 flex items-center justify-center",children:s?(0,a.jsx)("i",{className:"ri-moon-line text-yellow-500"}):(0,a.jsx)("i",{className:"ri-sun-line text-yellow-500"})})})}},4912:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(1793),i=s(3999);function l(e){let{variant:t="primary",size:s="md",loading:l=!1,icon:n,children:o,className:d,disabled:c,...m}=e;return(0,a.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:(0,i.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap",{primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl",secondary:"bg-gray-600 hover:bg-gray-700 text-white shadow-lg hover:shadow-xl",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white",ghost:"text-gray-600 hover:bg-gray-100 hover:text-gray-900",danger:"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s],(c||l)&&"opacity-50 cursor-not-allowed",d),disabled:c||l,...m,children:[l?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):n&&(0,a.jsx)("span",{className:"mr-2",children:n}),o]})}},6481:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(1793),i=s(4083);function l(e){let{children:t,title:s}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(r.P.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(r.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-building-line text-white text-lg"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"SharkSpace"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Noida Coworking"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i.A,{}),(0,a.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{window.location.href="/"},className:"flex items-center space-x-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors cursor-pointer",children:[(0,a.jsx)("i",{className:"ri-logout-box-r-line"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s&&(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:s})}),(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:t})]})]})}},7644:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(5155),r=s(2115),i=s(6481),l=s(4912);function n(e){let{room:t,onBookNow:s,userBookings:r}=e,i=60-r,n=r/60*100;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,a.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,a.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover object-top hover:scale-105 transition-transform duration-300"}),(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-sm font-medium",children:[i,"m left"]})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.name}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:t.description}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Today's Usage"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[r,"/60 min"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(n<50?"bg-green-500":n<80?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(n,"%")}})})]}),(0,a.jsx)(l.A,{onClick:()=>s(t),disabled:i<=0,className:"w-full cursor-pointer whitespace-nowrap",icon:(0,a.jsx)("i",{className:"ri-calendar-check-line"}),children:i<=0?"Limit Reached":"Book Now"})]})]})}var o=s(313),d=s(9737),c=s(935);let m=e=>{let{room:t,isOpen:s,onClose:i,onBookingComplete:l,selectedDate:n,user:m}=e,[x,h]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[f,w]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=async()=>{w(await D())};s&&e()},[s,n]);let v=e=>{let[t,s]=e.split(":").map(Number),a=new Date(n);return a.setHours(t,s,0,0),a},N=(e,t)=>(t.getTime()-e.getTime())/6e4,k=(e,t)=>e.toDateString()===t.toDateString(),T=async()=>{if(!x||!u)return b("Please select both start and end time"),!1;let e=v(x),s=v(u);if(e>=s)return b("End time must be after start time"),!1;let a=N(e,s);if(a>60)return b("Booking duration cannot exceed 60 minutes"),!1;let r=await fetch("/api/bookings",{headers:{"Content-Type":"application/json"}});if(!r.ok)return b("Failed to fetch bookings"),!1;let i=await r.json(),l=i.filter(e=>e.userId===m.id&&e.roomId===t.id&&k(new Date(e.startTime),n)).reduce((e,t)=>e+t.duration,0);return l+a>60?(b("You can only book ".concat(60-l," more minutes today")),!1):i.filter(a=>a.roomId===t.id&&new Date(a.startTime)<s&&new Date(a.endTime)>e).length>0?(b("This time slot is not available"),!1):(b(""),!0)},A=async()=>{if(!x||!u)return void b("Please select both start and end time");if(await T()){j(!0),b("");try{let e=v(x),s=v(u),a={id:(0,d.A)(),roomId:t.id,userId:m.id,username:m.username,roomName:t.name,startTime:e,endTime:s,duration:N(e,s),status:"active",createdAt:new Date};(await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(l(),i()):b("Booking failed. Please try again.")}catch(e){console.error("Booking failed:",e),b("Network error. Please try again.")}finally{j(!1)}}},D=async()=>{let e=await fetch("/api/bookings",{headers:{"Content-Type":"application/json"}});return e.ok?(await e.json()).filter(e=>e.userId===m.id&&e.roomId===t.id&&k(new Date(e.startTime),n)).reduce((e,t)=>e+t.duration,0):0};return(0,a.jsxs)(o.lG,{open:s,onClose:i,className:"relative z-50",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,a.jsxs)(o.lG.Panel,{className:"mx-auto max-w-md w-full rounded bg-white p-6 space-y-4",children:[(0,a.jsxs)(o.lG.Title,{className:"text-xl font-semibold",children:["Book Room: ",t.name]}),(0,a.jsxs)("p",{children:["Date: ",(0,c.A)(n,"PPP")]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{children:"Start Time:"}),(0,a.jsx)("input",{type:"time",value:x,onChange:e=>h(e.target.value),className:"border rounded p-2"}),(0,a.jsx)("label",{children:"End Time:"}),(0,a.jsx)("input",{type:"time",value:u,onChange:e=>g(e.target.value),className:"border rounded p-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Youâ€™ve used ",f," out of 60 minutes today."]}),p&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:p}),(0,a.jsx)("button",{onClick:A,disabled:y,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:y?"Booking...":"Book"})]})]})})]})};var x=s(1793),h=s(5833),u=s(3999);function g(e){let{bookings:t}=e,s=t.filter(e=>(0,h.A)(new Date(e.endTime),new Date)&&"active"===e.status),r=t.filter(e=>!(0,h.A)(new Date(e.endTime),new Date)||"active"!==e.status),i=e=>{let{booking:t,isPast:s}=e;return(0,a.jsxs)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-lg p-6 border-l-4 ".concat(s?"border-gray-300":"border-blue-500"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.roomName}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,c.A)(new Date(t.startTime),"MMM dd, yyyy")})]}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(s?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-700"),children:s?"Completed":"Active"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Time:"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[(0,c.A)(new Date(t.startTime),"HH:mm")," - ",(0,c.A)(new Date(t.endTime),"HH:mm")]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Duration:"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,u.AM)(t.duration)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Booked on:"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,c.A)(new Date(t.createdAt),"MMM dd, HH:mm")})]})]})]})};return(0,a.jsxs)("div",{className:"space-y-8",children:[s.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:[(0,a.jsx)("i",{className:"ri-calendar-check-line mr-2 text-blue-600"}),"Current Bookings"]}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,a.jsx)(i,{booking:e,isPast:!1},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:[(0,a.jsx)("i",{className:"ri-history-line mr-2 text-gray-600"}),"Booking History"]}),r.length>0?(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,a.jsx)(i,{booking:e,isPast:!0},e.id))}):(0,a.jsxs)(x.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-gray-50 rounded-xl",children:[(0,a.jsx)("i",{className:"ri-calendar-line text-4xl text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No past bookings yet"})]})]})]})}var p=s(3566),b=s(787);function y(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(null),[c,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)("rooms"),[y,j]=(0,r.useState)(!0),[f,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("user");e&&w(JSON.parse(e))},[]),(0,r.useEffect)(()=>{let e=async()=>{if(f)try{j(!0);let e={headers:{"Content-Type":"application/json"}},s=await fetch("/api/rooms",e),a=await fetch("/api/bookings?userId=".concat(f.id),e);if(!s.ok)throw Error("Failed to fetch rooms: ".concat(s.status," ").concat(s.statusText));if(!a.ok)throw Error("Failed to fetch bookings: ".concat(a.status," ").concat(a.statusText));let r=await s.json(),i=await a.json();t(Array.isArray(r)?r:[]),l(Array.isArray(i)?i:[])}catch(e){console.error("Failed to load data:",e),t([]),l([]),alert(e instanceof Error?e.message:"Failed to load data")}finally{j(!1)}};f&&e()},[f]);let v=e=>{d(e),x(!0)};return y?(0,a.jsx)(i.A,{title:"Client Dashboard",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Loading rooms and bookings..."})})}):(0,a.jsxs)(i.A,{title:"Client Dashboard",children:[(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-6 text-white",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",f.username,"!"]}),(0,a.jsx)("p",{className:"text-blue-100",children:"Ready to book your perfect workspace today?"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[(0,a.jsxs)("button",{onClick:()=>u("rooms"),className:"px-4 py-2 rounded-md font-medium transition-all cursor-pointer whitespace-nowrap ".concat("rooms"===h?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)("i",{className:"ri-building-line mr-2"}),"Available Rooms"]}),(0,a.jsxs)("button",{onClick:()=>u("bookings"),className:"px-4 py-2 rounded-md font-medium transition-all cursor-pointer whitespace-nowrap ".concat("bookings"===h?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)("i",{className:"ri-calendar-check-line mr-2"}),"My Bookings"]})]}),"rooms"===h&&(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===e.length?(0,a.jsx)("p",{className:"col-span-full text-gray-500",children:"No rooms available"}):e.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(n,{room:e,onBookNow:v,userBookings:(e=>{let t=(0,p.A)(new Date);return s.filter(s=>s.userId===f.id&&s.roomId===e&&(0,b.A)(new Date(s.startTime),t)).reduce((e,t)=>e+t.duration,0)})(e.id)})},e.id))})}),"bookings"===h&&(0,a.jsx)("div",{children:(0,a.jsx)(g,{bookings:s.filter(e=>e.userId===f.id)})})]}),o&&(0,a.jsx)(m,{isOpen:c,onClose:()=>x(!1),room:o,onBookingComplete:()=>{fetch("/api/bookings",{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>Array.isArray(e)?l(e):l([])).catch(e=>{console.error("Error refreshing bookings:",e),l([])})},selectedDate:new Date,user:f})]})}},9511:(e,t,s)=>{"use strict";s.d(t,{D:()=>n,ThemeProvider:()=>l});var a=s(5155),r=s(2115);let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)("light");return(0,r.useEffect)(()=>{let e=localStorage.getItem("theme");e?(l(e),"dark"===e&&document.documentElement.classList.add("dark")):window.matchMedia("(prefers-color-scheme: dark)").matches&&(l("dark"),document.documentElement.classList.add("dark"))},[]),(0,a.jsx)(i.Provider,{value:{theme:s,setTheme:e=>{l(e),localStorage.setItem("theme",e),"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}},children:t})}function n(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}}},e=>{e.O(0,[793,421,433,441,964,358],()=>e(e.s=3603)),_N_E=e.O()}]);